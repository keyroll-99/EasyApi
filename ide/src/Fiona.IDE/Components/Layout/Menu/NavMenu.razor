@using Fiona.IDE.Components.Pages.Project
@using Fiona.IDE.Components.Pages.Project.Menu

<Bar
    Mode="BarMode.VerticalInline"
    CollapseMode="BarCollapseMode.Small"
    Breakpoint="Breakpoint.Desktop"
    NavigationBreakpoint="Breakpoint.Tablet"
    ThemeContrast="ThemeContrast.Dark">
    <BarBrand>
        <BarItem>
            <div class="bar-brand-wrapper">
                <div class="logo-wrapper">
                    <Image Source="images/logo.jpg" Text="logo" Fluid/>
                </div>
                Fiona
            </div>
        </BarItem>
    </BarBrand>
    <BarMenu>
        <BarStart>
            <BarItem>
                <BarDropdown>
                    <BarDropdownToggle>
                        Project
                    </BarDropdownToggle>
                    <BarDropdownMenu>
                        <BarDropdownItem @onclick="() => _showNewProjectModal = !_showNewProjectModal">New project</BarDropdownItem>
                        <BarDropdownItem @onclick="() => _showLoadProjectModal = !_showLoadProjectModal">Load project</BarDropdownItem>
                    </BarDropdownMenu>
                </BarDropdown>
            </BarItem>
            @if (ProjectManager.IsLoaded())
            {
                <ProjectMenu/>
            }
            <BarItem>
                <BarLink To="/project-editor">app builder</BarLink>
            </BarItem>
        </BarStart>
    </BarMenu>
</Bar>

<NewProjectModal ShowModal="@_showNewProjectModal" />
<LoadProjectModal ShowModal="@_showLoadProjectModal"/>

@code
{
    [Inject]
    public IProjectManager ProjectManager { get; init; } = default!;

    private bool _showNewProjectModal = false;
    private bool _showLoadProjectModal = false;
}